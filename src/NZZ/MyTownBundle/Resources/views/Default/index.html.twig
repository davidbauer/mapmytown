{% extends "NZZMyTownBundle::layout.html.twig" %}
{% block body %}
    {% if project|default('nzz') == 'nzz' %}
        {#lat = 47.369, lng = 8.542#}
        {% set city = 'Zurich' %}
        {% set lat = '47.369' %}
        {% set lon =  '8.542' %}
    {% elseif project|default('nzz') == 'tagw' %}
        {#?lat=47.5546&lon=7.5944&#}
        {% set city = 'Basel' %}
        {%  set lat = 47.5546 %}
        {%  set lon =  7.5944 %}
    {% elseif project|default('nzz') == 'temps' %}
        {#lat=46.2048&lon=6.143&#}
        {% set city = 'Geneva' %}
        {%  set lat = 46.2048 %}
        {%  set lon =  6.143 %}
    {% endif %}
    <script type="text/javascript">
      $(function() {
        // Init i18n
        i18n.init({
          lng: '{{lang}}',
          load:'unspecific',
          fallbackLng: false,
          resGetPath: '/bundles/nzzmytown/locales/__lng__.json',
        }, function() {
          // Start the app
          var router = new app.routers.AppRouter();
          Backbone.history.start();
        });
      });

       // var config = {};
       // config.project = "{{ project }}";
       // config.lang = '{{ lang }}';
       // config.zoom = '{{ zoom }}';
       // config.lat = '{{ lat }}';
       // config.lon = '{{ lon }}';
   </script>
   <div data-view="root" class="app-container"></div>
{% endblock %}

{% block templates %}

<script id="template-root-view" type="text/x-handlebars-template">{% raw %}
<div class="app-container">

  <div class="content span-sidebar-left" id="map"></div>

  <div class="sidebar">
    <header class="header">
      <h1 class="header__heading">Stadtgeflüster 
        <span class="header__subheading">– zeigen Sie uns die unbekannten Seiten Ihrer Stadt
        </span>
      </h1>
      <p class="sidebar__text">Sie wissen etwas über Ihre Stadt, das andere auch wissen sollten. Tragen Sie es in die Karte ein!</p>
      <p>
        <a href="#" id="submit__wisdom__btn" class="btn btn-primary">Submit your wisdom</a>
        <a href="#" id="cancel__marker__btn" class="btn btn-secondary">{{t "form.cancel"}}</a>
        <a href="#commentModal" id="submit__marker__btn" class="btn btn-primary" data-toggle="modal">{{t "form.add"}}</a>
        <a href="#thanksModal" class="btn btn-primary" data-toggle="modal">{{t "thx.thankyou"}}</a>
      </p>
    </header>

    <section data-view="comments-list" class="sidebar__section comments__section"></section>
  </div>

  <div class="footer">
    <section class="sidebar__section sharing__section">
      <span class="sharing__label">{{t "share"}}</span>
      <ul class="sharing__list">
        <li class="sharing__item">
          <a href="#" 
            class="btn"
            onclick="
              window.open(
                'https://twitter.com/share?url='+encodeURIComponent(location.href), 
                'twitter-share-dialog', 
                'width=626,height=436'); 
              return false;">
            Twitter
          </a>
        </li>
        <li class="sharing__item">
          <a href="#" 
            class="btn"
            onclick="
              window.open(
                'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href), 
                'facebook-share-dialog', 
                'width=626,height=436'); 
              return false;">
            Facebook
          </a>
        </li>
      </ul>
      <a href="#tacModal" role="button" class="tacModal_link" data-toggle="modal">{{t "info.name"}}</a>
    </section>

    <section class="sidebar__section branding__section">
    <ul class="branding__list">
      <li class="branding__item">
        <a href="#"><img src="/bundles/nzzmytown/images/logo_tageswoche.png" alt="Tageswoche" width="80"></a>
      </li>
      <li class="branding__item">
        <a href="#"><img src="/bundles/nzzmytown/images/logo_letemps.png" alt="Le Temps" width="80"></a>
      </li>
      <li class="branding__item">
        <a href="#"><img src="/bundles/nzzmytown/images/logo_nzz.png" alt="Neue Zürcher Zeitung" width="80"></a>
      </li>
    </ul>
    </section>
  </div>

  <div id="commentModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="myModalLabel">[Form Heading]</h3>
    </div>
    <div class="modal-body">
      <form class="">
        <fieldset>
          <label>{{t "form.title"}}</label>
          <input type="text">
          <label>{{t "form.description"}}</label>
          <textarea rows="3"></textarea>
          <label class="radio inline">
            <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked>
            {{t "form.sentiLabels[0]"}}
          </label>
          <label class="radio inline">
            <input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
            {{t "form.sentiLabels[1]"}}
          </label>
          <label class="radio inline">
            <input type="radio" name="optionsRadios" id="optionsRadios3" value="option3">
            {{t "form.sentiLabels[2]"}}
          </label>
          <label>{{t "form.name"}}</label>
          <input type="text">
          <label>{{t "form.origin"}}</label>
          <input type="text">
        </fieldset>
      </form>
    </div>
    <div class="modal-footer">
      <button class="btn" data-dismiss="modal" aria-hidden="true">{{t "form.cancel"}}</button>
      <button class="btn btn-primary">{{t "form.add"}}</button>
    </div>
  </div>

  <div id="thanksModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="{{t "thx.thankyou"}}" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="tacModalLabel">{{t "thx.thankyou"}}</h3>
    </div>
    <div class="modal-body">
      <p>{{t "thx.share"}}</p>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary">{{t "thx.more"}}</button>
    </div>
  </div>

  <div id="tacModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="{{t "info.name"}}" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="tacModalLabel">{{t "info.name"}}</h3>
    </div>
    <div class="modal-body">
      <p>{{t "info.terms"}}</p>
      <p>{{t "info.inspiration"}}</p>
      <p>{{t "info.credits"}}</p>
    </div>
  </div>

</div>
{% endraw %}</script>



<script id="template-comment" type="text/x-handlebars-template">{% raw %}
<li class="comments__item comment" data-id="{{id}}">
  <h3 class="comment__title">{{title}}</h3>
  <p class="comment__text">{{description}}</p>
  {{#if authorName}}
    <span class="comment__author">{{authorName}}{{#if authorLocation}}, {{authorLocation}}{{/if}}</span>
  {{/if}}
</li>
{% endraw %}</script>

{% endblock %}
